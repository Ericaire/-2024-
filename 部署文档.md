(未完成)
全项目的结构：
```
SendsTraningProject/
│
├── app.py    # Flask应用主文件
│
├── templates/    # 模板文件夹
│   └── index.html    # 网站主页模板文件
│
├── spider.py    # 爬虫程序文件
│
├── backup.sh    # 用于备份数据的脚本
│
├── nginx    # Nginx相关文件
│   └── nginx_index # 
|
├── init_db.sql    # 数据库初始化文件
│
├── venv/    # 虚拟环境
│
├── .gitignore    # Git忽略文件
│
├── requirements.txt    # Python依赖包列表
│
├── Dockerfile    # Dockerfile文件
│
└── README.md    # 项目说明文件
```
 **任务实现**

- 爬虫容器
这里选择使用BeautifulSoup和requests库
数据库使用sqlite
引入的packages：
```
from bs4 import BeautifulSoup
import requests
from flask_sqlalchemy import SQLAlchemy
from flask import Flask
```
其中SQLAlchemy是Python的SQL工具包

Dockerfile

- Flask web应用容器
Flask 定义: 通过Python类定义的Web应用框架
具体操作:
容器基于的是python3.8镜像
将工作目录设置成/app并将当前目录内文件都移动到/app中
更新安装器并安装一些工具:
```用到这些工具的原因之后会进行说明
RUN apt-get update && apt-get install -y unzip sqlite3 cron nano
```
声明容器暴露5000端口
这里的声明貌似没有实质性作用，但作为一个好习惯，这样可以方便容器原理的理解

最后就是使用CMD命令启动flask应用

关于应用程序运行的解释：
首先应用需要初始化:
```
app = Flask(__name__)
```
```
db = SQLAlchemy(app)
```

然后这里我把数据库设置在 'sqlite:////var/lib/sqlite/test.db' 
```
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:////var/lib/sqlite/test.db' ```
我定义了一个News_data类，用到数据库模型，包含id、title、link三列；id为外键，并且设置title和link唯一且不可缺失; 这里如果不介意爬取到重复的信息也可以不设置
浏览的效果:
[./]

``` 定义/hdxw的路由，渲染网页

@app.route('/hdxw')
def home():
        
    all_news_data = NewsData.query.all()
    return render_template('home.html', news_data=all_news_data)

```home.html就是主页文件;这里把爬取的数据传递给了news_data, 这些数据在home.html中使用

如果项目比较大、运用相同的html布局比较多的话，可以考虑将重复的代码单独构成一个layout.html, 方便重复使用
我这里templates分为home.html和layout.html两个文件
```layout.html
<!DOCTYPE html>
<html>
<head>
    <title>华大新闻</title>
</head>
<body>
    {% block body %} {% endblock %}
</body>
</html>

```
```home.html
{% extends 'layout.html' %}

{% block body %}

<h1>华大新闻</h1>
{% for news in news_data %}
<p>
    <a href="{{ news.link }}">{{ news.title }}</a>
</p>
{% endfor %}

{% endblock %}
```
运用了到Jinja来构建和扩展代码块

- Nginx容器
这里选择了Nginx作为反向代理，

Dockerfile
- 容器编排 Docker compose

- 定时导出数据，用Rclone上传腾讯云对象存储

腾讯云s3存储桶
[./]

- `Github Actions`，实现在push改动后自动ssh登录服务器部署最新服务

 **问题解决**  

- Git的用法一开始搞错了，后面重做
- docker-compose.yml中nginx容器用到的文件较多，可以考虑直接讲原nginx文件夹链接到容器中，而不是每个文件都单独进行链接
